webpackJsonp([1],{1591:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(12),i=n(22),s=n(288),a=n(1661),d=(n.n(a),n(1654)),u=n(1634),c=n(1635);n.d(t,"ComponentsModule",(function(){return l}));var l=(function(){function e(){}return e})();l=__decorate([n.i(r.NgModule)({imports:[o.CommonModule,i.a,s.a,a.TreeModule,d.a],declarations:[u.a,c.a]})],l)},1605:function(e,t,n){"use strict";var r=n(0),o=n(39),i=n(1663),s=(function(){function e(){this.draggableNodeEvents$=new o.Subject}return e.prototype.fireNodeDragged=function(e,t){e.tree&&!e.tree.isStatic()&&this.draggableNodeEvents$.next(new i.NodeDraggableEvent(e,t))},e.prototype.captureNode=function(e){this.capturedNode=e},e.prototype.getCapturedNode=function(){return this.capturedNode},e.prototype.releaseCapturedNode=function(){this.capturedNode=null},e.decorators=[{type:r.Injectable}],e.ctorParameters=function(){return[]},e})();t.NodeDraggableService=s},1606:function(e,t,n){"use strict";(function(e){e[e.NewFolder=0]="NewFolder",e[e.NewTag=1]="NewTag",e[e.Rename=2]="Rename",e[e.Remove=3]="Remove"})(t.NodeMenuItemAction||(t.NodeMenuItemAction={}));t.NodeMenuItemAction;(function(e){e[e.Close=0]="Close"})(t.NodeMenuAction||(t.NodeMenuAction={}));t.NodeMenuAction},1607:function(e,t,n){"use strict";var r=n(0),o=n(39),i=n(1606),s=(function(){function e(){this.nodeMenuEvents$=new o.Subject}return e.prototype.fireMenuEvent=function(e,t){var n={sender:e,action:t};this.nodeMenuEvents$.next(n)},e.prototype.hideMenuStream=function(e){return this.nodeMenuEvents$.filter((function(t){return e.nativeElement!==t.sender})).filter((function(e){return e.action===i.NodeMenuAction.Close}))},e.prototype.hideMenuForAllNodesExcept=function(e){this.nodeMenuEvents$.next({sender:e.nativeElement,action:i.NodeMenuAction.Close})},e.decorators=[{type:r.Injectable}],e.ctorParameters=function(){return[]},e})();t.NodeMenuService=s},1608:function(e,t,n){"use strict";var r,o=n(106),i=n(39),s=n(1641);(function(e){e[e.NotStarted=0]="NotStarted",e[e.Loading=1]="Loading",e[e.Completed=2]="Completed"})(r||(r={}));var a=(function(){function e(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1),this._childrenLoadingState=r.NotStarted,this.buildTreeFromModel(e,t,n)}return e.prototype.buildTreeFromModel=function(t,n,r){var i=this;this.parent=n,this.node=o.extend(o.omit(t,"children"),{settings:s.TreeModelSettings.merge(t,o.get(n,"node"))}),o.isFunction(this.node.loadChildren)?this._loadChildren=this.node.loadChildren:o.forEach(o.get(t,"children"),(function(t,n){i._addChild(new e(t,i),n)})),Array.isArray(this._children)||(this._children=this.node.loadChildren||r?[]:null)},e.prototype.childrenAreBeingLoaded=function(){return this._childrenLoadingState===r.Loading},e.prototype.canLoadChildren=function(){return this._childrenLoadingState===r.NotStarted&&this.foldingType===s.FoldingType.Expanded&&!!this._loadChildren},e.prototype.childrenShouldBeLoaded=function(){return!!this._loadChildren},Object.defineProperty(e.prototype,"children",{get:function(){return this._children},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"childrenAsync",{get:function(){var t=this;return this.canLoadChildren()?(setTimeout((function(){return t._childrenLoadingState=r.Loading})),new i.Observable(function(n){t._loadChildren((function(i){t._children=o.map(i,(function(n){return new e(n,t)})),t._childrenLoadingState=r.Completed,n.next(t.children),n.complete()}))})):i.Observable.of(this.children)},enumerable:!0,configurable:!0}),e.prototype.createNode=function(t){var n=new e({value:""},null,t);return n.markAsNew(),this.isLeaf()?this.addSibling(n):this.addChild(n)},Object.defineProperty(e.prototype,"value",{get:function(){return this.node.value},set:function(t){if("string"==typeof t||e.isRenamable(t))if(e.isRenamable(this.value)){var n="string"==typeof t?t:o.toString(t);this.node.value=e.applyNewValueToRenamable(this.value,n)}else this.node.value=e.isValueEmpty(t)?this.node.value:o.toString(t)},enumerable:!0,configurable:!0}),e.prototype.addSibling=function(e,t){return o.isArray(o.get(this.parent,"children"))?this.parent.addChild(e,t):null},e.prototype.addChild=function(t,n){return this._addChild(e.cloneTreeShallow(t),n)},e.prototype._addChild=function(e,t){return void 0===t&&(t=o.size(this._children)||0),e.parent=this,Array.isArray(this._children)?this._children.splice(t,0,e):this._children=[e],e},e.prototype.swapWithSibling=function(e){if(this.hasSibling(e)){var t=e.positionInParent,n=this.positionInParent;this.parent._children[t]=this,this.parent._children[n]=e}},Object.defineProperty(e.prototype,"positionInParent",{get:function(){return o.indexOf(this.parent.children,this)},enumerable:!0,configurable:!0}),e.prototype.isStatic=function(){return o.get(this.node.settings,"static",!1)},e.prototype.isLeaf=function(){return!this.isBranch()},e.prototype.isBranch=function(){return Array.isArray(this._children)},e.prototype.isRoot=function(){return null===this.parent},e.prototype.hasSibling=function(e){return!this.isRoot()&&o.includes(this.parent.children,e)},e.prototype.hasChild=function(e){return o.includes(this._children,e)},e.prototype.removeChild=function(e){var t=o.findIndex(this._children,(function(t){return t===e}));t>=0&&this._children.splice(t,1)},e.prototype.removeItselfFromParent=function(){this.parent&&this.parent.removeChild(this)},e.prototype.switchFoldingType=function(){this.isLeaf()||(this.node._foldingType=this.isNodeExpanded()?s.FoldingType.Collapsed:s.FoldingType.Expanded)},e.prototype.isNodeExpanded=function(){return this.foldingType===s.FoldingType.Expanded},Object.defineProperty(e.prototype,"foldingType",{get:function(){return this.node._foldingType||(this.childrenShouldBeLoaded()?this.node._foldingType=s.FoldingType.Collapsed:this._children?this.node._foldingType=s.FoldingType.Expanded:this.node._foldingType=s.FoldingType.Leaf),this.node._foldingType},enumerable:!0,configurable:!0}),e.prototype.isNew=function(){return this.node._status===s.TreeStatus.New},e.prototype.markAsNew=function(){this.node._status=s.TreeStatus.New},e.prototype.isBeingRenamed=function(){return this.node._status===s.TreeStatus.IsBeingRenamed},e.prototype.markAsBeingRenamed=function(){this.node._status=s.TreeStatus.IsBeingRenamed},e.prototype.isModified=function(){return this.node._status===s.TreeStatus.Modified},e.prototype.markAsModified=function(){this.node._status=s.TreeStatus.Modified},e.isValueEmpty=function(e){return o.isEmpty(o.trim(e))},e.isRenamable=function(e){return o.has(e,"setName")&&o.isFunction(e.setName)&&o.has(e,"toString")&&o.isFunction(e.toString)&&e.toString!==Object.toString},e.cloneTreeShallow=function(t){var n=new e(o.clone(t.node));return n._children=t._children,n},e.applyNewValueToRenamable=function(e,t){var n=o.merge({},e);return n.setName(t),n},e})();t.Tree=a},1609:function(e,t,n){"use strict";var r=n(1640),o=n(39),i=n(0),s=n(1605),a=(function(){function e(e){this.nodeDraggableService=e,this.nodeMoved$=new o.Subject,this.nodeRemoved$=new o.Subject,this.nodeRenamed$=new o.Subject,this.nodeCreated$=new o.Subject,this.nodeSelected$=new o.Subject,this.nodeRemoved$.subscribe((function(e){return e.node.removeItselfFromParent()}))}return e.prototype.unselectStream=function(e){return this.nodeSelected$.filter((function(t){return e!==t.node}))},e.prototype.fireNodeRemoved=function(e){this.nodeRemoved$.next(new r.NodeRemovedEvent(e))},e.prototype.fireNodeCreated=function(e){this.nodeCreated$.next(new r.NodeCreatedEvent(e))},e.prototype.fireNodeSelected=function(e){this.nodeSelected$.next(new r.NodeSelectedEvent(e))},e.prototype.fireNodeRenamed=function(e,t){this.nodeRenamed$.next(new r.NodeRenamedEvent(t,e,t.value))},e.prototype.fireNodeMoved=function(e,t){this.nodeMoved$.next(new r.NodeMovedEvent(e,t))},e.prototype.draggedStream=function(e,t){return this.nodeDraggableService.draggableNodeEvents$.filter((function(e){return e.target===t})).filter((function(t){return!t.captured.tree.hasChild(e)}))},e.decorators=[{type:i.Injectable}],e.ctorParameters=function(){return[{type:s.NodeDraggableService,decorators:[{type:i.Inject,args:[s.NodeDraggableService]}]}]},e})();t.TreeService=a},1634:function(e,t,n){"use strict";var r=n(0);n.d(t,"a",(function(){return o}));var o=(function(){function e(){}return e})();o=__decorate([n.i(r.Component)({selector:"components",template:"<router-outlet></router-outlet>"}),__metadata("design:paramtypes",[])],o)},1635:function(e,t,n){"use strict";var r=n(0);n.d(t,"a",(function(){return o}));var o=(function(){function e(){this.tree={value:"Programming languages by programming paradigm",children:[{value:"Object-oriented programming",children:[{value:"Java"},{value:"C++"},{value:"C#"}]},{value:"Prototype-based programming",children:[{value:"JavaScript"},{value:"CoffeeScript"},{value:"Lua"}]}]}}return e})();o=__decorate([n.i(r.Component)({selector:"tree-view",template:n(1686)}),__metadata("design:paramtypes",[])],o)},1638:function(e,t,n){"use strict";(function(e){e[e.Cancel=0]="Cancel"})(t.NodeEditableEventAction||(t.NodeEditableEventAction={}));t.NodeEditableEventAction},1639:function(e,t,n){"use strict";var r=n(0),o=n(1609),i=n(1608),s=(function(){function e(e){this.treeService=e,this.nodeCreated=new r.EventEmitter,this.nodeRemoved=new r.EventEmitter,this.nodeRenamed=new r.EventEmitter,this.nodeSelected=new r.EventEmitter,this.nodeMoved=new r.EventEmitter}return e.prototype.ngOnChanges=function(t){this.treeModel?this.tree=new i.Tree(this.treeModel):this.tree=e.EMPTY_TREE},e.prototype.ngOnInit=function(){var e=this;this.treeService.nodeRemoved$.subscribe((function(t){e.nodeRemoved.emit(t)})),this.treeService.nodeRenamed$.subscribe((function(t){e.nodeRenamed.emit(t)})),this.treeService.nodeCreated$.subscribe((function(t){e.nodeCreated.emit(t)})),this.treeService.nodeSelected$.subscribe((function(t){e.nodeSelected.emit(t)})),this.treeService.nodeMoved$.subscribe((function(t){e.nodeMoved.emit(t)}))},e.EMPTY_TREE=new i.Tree({value:""}),e.decorators=[{type:r.Component,args:[{selector:"tree",template:'<tree-internal [tree]="tree" [settings]="settings"></tree-internal>',providers:[o.TreeService]}]}],e.ctorParameters=function(){return[{type:o.TreeService,decorators:[{type:r.Inject,args:[o.TreeService]}]}]},e.propDecorators={treeModel:[{type:r.Input,args:["tree"]}],settings:[{type:r.Input}],nodeCreated:[{type:r.Output}],nodeRemoved:[{type:r.Output}],nodeRenamed:[{type:r.Output}],nodeSelected:[{type:r.Output}],nodeMoved:[{type:r.Output}]},e})();t.TreeComponent=s},1640:function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=(function(){function e(e){this.node=e}return e})();t.NodeEvent=o;var i=(function(e){function t(t){e.call(this,t)}return r(t,e),t})(o);t.NodeSelectedEvent=i;var s=(function(e){function t(t){e.call(this,t)}return r(t,e),t})(o);t.NodeDestructiveEvent=s;var a=(function(e){function t(t,n){e.call(this,t),this.previousParent=n}return r(t,e),t})(s);t.NodeMovedEvent=a;var d=(function(e){function t(t){e.call(this,t)}return r(t,e),t})(s);t.NodeRemovedEvent=d;var u=(function(e){function t(t){e.call(this,t)}return r(t,e),t})(s);t.NodeCreatedEvent=u;var c=(function(e){function t(t,n,r){e.call(this,t),this.oldValue=n,this.newValue=r}return r(t,e),t})(s);t.NodeRenamedEvent=c},1641:function(e,t,n){"use strict";var r=n(106),o=(function(){function e(e){this._cssClass=e}return Object.defineProperty(e.prototype,"cssClass",{get:function(){return this._cssClass},enumerable:!0,configurable:!0}),e.Expanded=new e("node-expanded"),e.Collapsed=new e("node-collapsed"),e.Leaf=new e("node-leaf"),e})();t.FoldingType=o;var i=(function(){function e(){}return e.merge=function(e,t){return r.defaults({},r.get(e,"settings"),r.get(t,"settings"),{static:!1})},e})();t.TreeModelSettings=i,(function(e){e[e.New=0]="New",e[e.Modified=1]="Modified",e[e.IsBeingRenamed=2]="IsBeingRenamed"})(t.TreeStatus||(t.TreeStatus={}));t.TreeStatus},1642:function(e,t,n){"use strict";function r(e){return e.button===a.Left}function o(e){return e.button===a.Right}function i(e){return e.keyCode===s.Escape}t.isLeftButtonClicked=r,t.isRightButtonClicked=o,t.isEscapePressed=i,(function(e){e[e.Escape=27]="Escape"})(t.Keys||(t.Keys={}));var s=t.Keys;(function(e){e[e.Left=0]="Left",e[e.Right=2]="Right"})(t.MouseButtons||(t.MouseButtons={}));var a=t.MouseButtons},1654:function(e,t,n){"use strict";var r=n(28),o=n(1634),i=n(1635);n.d(t,"a",(function(){return a}));var s=[{path:"",component:o.a,children:[{path:"treeview",component:i.a}]}],a=r.a.forChild(s)},1661:function(e,t,n){"use strict";var r=n(1641);t.TreeModelSettings=r.TreeModelSettings,t.FoldingType=r.FoldingType;var o=n(1608);t.Tree=o.Tree;var i=n(1640);t.NodeEvent=i.NodeEvent,t.NodeCreatedEvent=i.NodeCreatedEvent,t.NodeRemovedEvent=i.NodeRemovedEvent,t.NodeRenamedEvent=i.NodeRenamedEvent,t.NodeMovedEvent=i.NodeMovedEvent,t.NodeSelectedEvent=i.NodeSelectedEvent,t.NodeDestructiveEvent=i.NodeDestructiveEvent;var s=n(1639);t.TreeComponent=s.TreeComponent;var a=n(1668);t.TreeModule=a.TreeModule},1662:function(e,t,n){"use strict";var r=(function(){function e(e,t){this.anElement=e,this.aTree=t}return e.prototype.canBeDroppedAt=function(e){return!this.sameAs(e)&&!this.contains(e)},e.prototype.contains=function(e){return this.element.nativeElement.contains(e.nativeElement)},e.prototype.sameAs=function(e){return this.element===e},Object.defineProperty(e.prototype,"element",{get:function(){return this.anElement},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tree",{get:function(){return this.aTree},enumerable:!0,configurable:!0}),e})();t.CapturedNode=r},1663:function(e,t,n){"use strict";var r=(function(){function e(e,t){this.captured=e,this.target=t}return e})();t.NodeDraggableEvent=r},1664:function(e,t,n){"use strict";var r=n(0),o=n(1605),i=n(1662),s=(function(){function e(e,t,n){this.element=e,this.nodeDraggableService=t,this.renderer=n,this.disposersForDragListeners=[],this.nodeNativeElement=e.nativeElement}return e.prototype.ngOnInit=function(){this.tree.isStatic()||(this.renderer.setElementAttribute(this.nodeNativeElement,"draggable","true"),this.disposersForDragListeners.push(this.renderer.listen(this.nodeNativeElement,"dragenter",this.handleDragEnter.bind(this))),this.disposersForDragListeners.push(this.renderer.listen(this.nodeNativeElement,"dragover",this.handleDragOver.bind(this))),this.disposersForDragListeners.push(this.renderer.listen(this.nodeNativeElement,"dragstart",this.handleDragStart.bind(this))),this.disposersForDragListeners.push(this.renderer.listen(this.nodeNativeElement,"dragleave",this.handleDragLeave.bind(this))),this.disposersForDragListeners.push(this.renderer.listen(this.nodeNativeElement,"drop",this.handleDrop.bind(this))),this.disposersForDragListeners.push(this.renderer.listen(this.nodeNativeElement,"dragend",this.handleDragEnd.bind(this))))},e.prototype.ngOnDestroy=function(){this.disposersForDragListeners.forEach((function(e){return e()}))},e.prototype.handleDragStart=function(t){t.stopPropagation(),this.nodeDraggableService.captureNode(new i.CapturedNode(this.nodeDraggable,this.tree)),t.dataTransfer.setData("text",e.DATA_TRANSFER_STUB_DATA),t.dataTransfer.effectAllowed="move"},e.prototype.handleDragOver=function(e){e.preventDefault(),e.dataTransfer.dropEffect="move"},e.prototype.handleDragEnter=function(e){e.preventDefault(),this.containsElementAt(e)&&this.addClass("over-drop-target")},e.prototype.handleDragLeave=function(e){this.containsElementAt(e)||this.removeClass("over-drop-target")},e.prototype.handleDrop=function(e){return e.preventDefault(),e.stopPropagation(),this.removeClass("over-drop-target"),!!this.isDropPossible(e)&&(this.nodeDraggableService.getCapturedNode()?this.notifyThatNodeWasDropped():void 0)},e.prototype.isDropPossible=function(e){var t=this.nodeDraggableService.getCapturedNode();return t&&t.canBeDroppedAt(this.nodeDraggable)&&this.containsElementAt(e)},e.prototype.handleDragEnd=function(e){this.removeClass("over-drop-target"),this.nodeDraggableService.releaseCapturedNode()},e.prototype.containsElementAt=function(e){var t=e.x,n=void 0===t?e.clientX:t,r=e.y,o=void 0===r?e.clientY:r;return this.nodeNativeElement.contains(document.elementFromPoint(n,o))},e.prototype.addClass=function(e){this.nodeNativeElement.classList.add(e)},e.prototype.removeClass=function(e){this.nodeNativeElement.classList.remove(e)},e.prototype.notifyThatNodeWasDropped=function(){this.nodeDraggableService.fireNodeDragged(this.nodeDraggableService.getCapturedNode(),this.nodeDraggable)},e.DATA_TRANSFER_STUB_DATA="some browsers enable drag-n-drop only when dataTransfer has data",e.decorators=[{type:r.Directive,args:[{selector:"[nodeDraggable]"}]}],e.ctorParameters=function(){return[{type:r.ElementRef,decorators:[{type:r.Inject,args:[r.ElementRef]}]},{type:o.NodeDraggableService,decorators:[{type:r.Inject,args:[o.NodeDraggableService]}]},{type:r.Renderer,decorators:[{type:r.Inject,args:[r.Renderer]}]}]},e.propDecorators={nodeDraggable:[{type:r.Input}],tree:[{type:r.Input}]},e})();t.NodeDraggableDirective=s},1665:function(e,t,n){"use strict";var r=n(0),o=n(1638),i=(function(){function e(e,t){this.renderer=e,this.elementRef=t,this.valueChanged=new r.EventEmitter(!1)}return e.prototype.ngOnInit=function(){var e=this.elementRef.nativeElement;this.renderer.invokeElementMethod(e,"focus",[]),this.renderer.setElementProperty(e,"value",this.nodeValue)},e.prototype.applyNewValue=function(e){this.valueChanged.emit({type:"keyup",value:e})},e.prototype.applyNewValueByLoosingFocus=function(e){this.valueChanged.emit({type:"blur",value:e})},e.prototype.cancelEditing=function(){this.valueChanged.emit({type:"keyup",value:this.nodeValue,action:o.NodeEditableEventAction.Cancel})},e.decorators=[{type:r.Directive,args:[{selector:"[nodeEditable]"}]}],e.ctorParameters=function(){return[{type:r.Renderer,decorators:[{type:r.Inject,args:[r.Renderer]}]},{type:r.ElementRef,decorators:[{type:r.Inject,args:[r.ElementRef]}]}]},e.propDecorators={nodeValue:[{type:r.Input,args:["nodeEditable"]}],valueChanged:[{type:r.Output}],applyNewValue:[{type:r.HostListener,args:["keyup.enter",["$event.target.value"]]}],applyNewValueByLoosingFocus:[{type:r.HostListener,args:["blur",["$event.target.value"]]}],cancelEditing:[{type:r.HostListener,args:["keyup.esc"]}]},e})();t.NodeEditableDirective=i},1666:function(e,t,n){"use strict";var r=n(0),o=n(1607),i=n(1606),s=n(1642),a=(function(){function e(e,t){this.renderer=e,this.nodeMenuService=t,this.menuItemSelected=new r.EventEmitter,this.availableMenuItems=[{name:"New tag",action:i.NodeMenuItemAction.NewTag,cssClass:"new-tag"},{name:"New folder",action:i.NodeMenuItemAction.NewFolder,cssClass:"new-folder"},{name:"Rename",action:i.NodeMenuItemAction.Rename,cssClass:"rename"},{name:"Remove",action:i.NodeMenuItemAction.Remove,cssClass:"remove"}],this.disposersForGlobalListeners=[]}return e.prototype.ngOnInit=function(){this.disposersForGlobalListeners.push(this.renderer.listenGlobal("document","keyup",this.closeMenu.bind(this))),this.disposersForGlobalListeners.push(this.renderer.listenGlobal("document","click",this.closeMenu.bind(this)))},e.prototype.ngOnDestroy=function(){this.disposersForGlobalListeners.forEach((function(e){return e()}))},e.prototype.onMenuItemSelected=function(e,t){s.isLeftButtonClicked(e)&&this.menuItemSelected.emit({nodeMenuItemAction:t.action})},e.prototype.closeMenu=function(e){(e instanceof MouseEvent||s.isEscapePressed(e))&&this.nodeMenuService.fireMenuEvent(e.target,i.NodeMenuAction.Close)},e.decorators=[{type:r.Component,args:[{selector:"node-menu",template:'\n    <div class="node-menu">\n      <ul class="node-menu-content">\n        <li class="node-menu-item" *ngFor="let menuItem of availableMenuItems"\n            (click)="onMenuItemSelected($event, menuItem)">\n          <div class="node-menu-item-icon {{menuItem.cssClass}}"></div>\n          <span class="node-menu-item-value">{{menuItem.name}}</span>\n        </li>\n      </ul>\n    </div>\n  '}]}],e.ctorParameters=function(){return[{type:r.Renderer,decorators:[{type:r.Inject,args:[r.Renderer]}]},{type:o.NodeMenuService,decorators:[{type:r.Inject,args:[o.NodeMenuService]}]}]},e.propDecorators={menuItemSelected:[{type:r.Output}]},e})();t.NodeMenuComponent=a},1667:function(e,t,n){"use strict";var r=n(0),o=n(1608),i=n(1607),s=n(1606),a=n(1638),d=n(1609),u=n(1642),c=(function(){function e(e,t,n){this.nodeMenuService=e,this.treeService=t,this.element=n,this.isSelected=!1,this.isMenuVisible=!1}return e.prototype.ngOnInit=function(){var e=this;this.settings=this.settings||{rootIsVisible:!0},this.nodeMenuService.hideMenuStream(this.element).subscribe((function(){return e.isMenuVisible=!1})),this.treeService.unselectStream(this.tree).subscribe((function(){return e.isSelected=!1})),this.treeService.draggedStream(this.tree,this.element).subscribe((function(t){e.tree.hasSibling(t.captured.tree)?e.swapWithSibling(t.captured.tree,e.tree):e.tree.isBranch()?e.moveNodeToThisTreeAndRemoveFromPreviousOne(t,e.tree):e.moveNodeToParentTreeAndRemoveFromPreviousOne(t,e.tree)}))},e.prototype.swapWithSibling=function(e,t){t.swapWithSibling(e),this.treeService.fireNodeMoved(e,e.parent)},e.prototype.moveNodeToThisTreeAndRemoveFromPreviousOne=function(e,t){this.treeService.fireNodeRemoved(e.captured.tree);var n=t.addChild(e.captured.tree);this.treeService.fireNodeMoved(n,e.captured.tree.parent)},e.prototype.moveNodeToParentTreeAndRemoveFromPreviousOne=function(e,t){this.treeService.fireNodeRemoved(e.captured.tree);var n=t.addSibling(e.captured.tree,t.positionInParent);this.treeService.fireNodeMoved(n,e.captured.tree.parent)},e.prototype.onNodeSelected=function(e){u.isLeftButtonClicked(e)&&(this.isSelected=!0,this.treeService.fireNodeSelected(this.tree))},e.prototype.showMenu=function(e){this.tree.isStatic()||(u.isRightButtonClicked(e)&&(this.isMenuVisible=!this.isMenuVisible,this.nodeMenuService.hideMenuForAllNodesExcept(this.element)),e.preventDefault())},e.prototype.onMenuItemSelected=function(e){switch(e.nodeMenuItemAction){case s.NodeMenuItemAction.NewTag:case s.NodeMenuItemAction.NewFolder:this.onNewSelected(e);break;case s.NodeMenuItemAction.Rename:this.onRenameSelected();break;case s.NodeMenuItemAction.Remove:this.onRemoveSelected();break;default:throw new Error("Chosen menu item doesn't exist")}},e.prototype.onNewSelected=function(e){this.tree.createNode(e.nodeMenuItemAction===s.NodeMenuItemAction.NewFolder),this.isMenuVisible=!1},e.prototype.onRenameSelected=function(){this.tree.markAsBeingRenamed(),this.isMenuVisible=!1},e.prototype.onRemoveSelected=function(){this.treeService.fireNodeRemoved(this.tree)},e.prototype.applyNewValue=function(e){if((e.action===a.NodeEditableEventAction.Cancel||this.tree.isNew())&&o.Tree.isValueEmpty(e.value))return this.treeService.fireNodeRemoved(this.tree);if(this.tree.isNew()&&(this.tree.value=e.value,this.treeService.fireNodeCreated(this.tree)),this.tree.isBeingRenamed()){var t=this.tree.value;this.tree.value=e.value,this.treeService.fireNodeRenamed(t,this.tree)}this.tree.markAsModified()},e.prototype.shouldShowInputForTreeValue=function(){return this.tree.isNew()||this.tree.isBeingRenamed()},e.prototype.isRootHidden=function(){return this.tree.isRoot()&&!this.settings.rootIsVisible},e.decorators=[{type:r.Component,args:[{selector:"tree-internal",template:'\n  <ul class="tree" *ngIf="tree" [ngClass]="{rootless: isRootHidden()}">\n    <li>\n      <div class="value-container"\n        [ngClass]="{rootless: isRootHidden()}"\n        (contextmenu)="showMenu($event)"\n        [nodeDraggable]="element"\n        [tree]="tree">\n\n        <div class="folding" (click)="tree.switchFoldingType()" [ngClass]="tree.foldingType.cssClass"></div>\n        <div class="node-value"\n          *ngIf="!shouldShowInputForTreeValue()"\n          [class.node-selected]="isSelected"\n          (click)="onNodeSelected($event)">\n            {{tree.value}}<span class="loading-children" *ngIf="tree.childrenAreBeingLoaded()"></span>\n        </div>\n\n        <input type="text" class="node-value"\n           *ngIf="shouldShowInputForTreeValue()"\n           [nodeEditable]="tree.value"\n           (valueChanged)="applyNewValue($event)"/>\n      </div>\n\n      <node-menu *ngIf="isMenuVisible" (menuItemSelected)="onMenuItemSelected($event)"></node-menu>\n\n      <template [ngIf]="tree.isNodeExpanded()">\n        <tree-internal *ngFor="let child of tree.childrenAsync | async" [tree]="child"></tree-internal>\n      </template>\n    </li>\n  </ul>\n  '}]}],e.ctorParameters=function(){return[{type:i.NodeMenuService,decorators:[{type:r.Inject,args:[i.NodeMenuService]}]},{type:d.TreeService,decorators:[{type:r.Inject,args:[d.TreeService]}]},{type:r.ElementRef,decorators:[{type:r.Inject,args:[r.ElementRef]}]}]},e.propDecorators={tree:[{type:r.Input}],settings:[{type:r.Input}]},e})();t.TreeInternalComponent=c},1668:function(e,t,n){"use strict";var r=n(0),o=n(1639),i=n(1667),s=n(12),a=n(1664),d=n(1605),u=n(1665),c=n(1666),l=n(1607),p=n(1609),h=(function(){function e(){}return e.decorators=[{type:r.NgModule,args:[{imports:[s.CommonModule],declarations:[a.NodeDraggableDirective,o.TreeComponent,u.NodeEditableDirective,c.NodeMenuComponent,i.TreeInternalComponent],exports:[o.TreeComponent],providers:[d.NodeDraggableService,l.NodeMenuService,p.TreeService]}]}],e.ctorParameters=function(){return[]},e})();t.TreeModule=h},1686:function(e,t){e.exports='<div class="col-md-6">\n  <ba-card title="tree_view.title">\n    <tree id="tree-view" [tree]="tree"></tree>\n  </ba-card>\n</div>\n'}});